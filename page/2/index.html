<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="/js/image-compare-viewer.min.css">
<script src="/js/image-compare-viewer.min.js"></script>


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"darkpixel.top","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="活着就要继续前进">
<meta property="og:type" content="website">
<meta property="og:title" content="Integrator">
<meta property="og:url" content="https://darkpixel.top/page/2/index.html">
<meta property="og:site_name" content="Integrator">
<meta property="og:description" content="活着就要继续前进">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="黑色像素">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://darkpixel.top/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Integrator</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Integrator</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://darkpixel.top/2025/03/26/Light-Unit-in-Graphics/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="黑色像素">
      <meta itemprop="description" content="活着就要继续前进">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Integrator">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/03/26/Light-Unit-in-Graphics/" class="post-title-link" itemprop="url">Light Unit in Graphics</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-03-26 14:19:27" itemprop="dateCreated datePublished" datetime="2025-03-26T14:19:27+00:00">2025-03-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-24 01:54:20" itemprop="dateModified" datetime="2025-06-24T01:54:20+00:00">2025-06-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Computer-Graphics/" itemprop="url" rel="index"><span itemprop="name">Computer Graphics</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Computer-Graphics/BRDF/" itemprop="url" rel="index"><span itemprop="name">BRDF</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>dummy</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<blockquote>
<p>I don’t know of any game engines where they attribute real-world
units to lighting and material values, since those kinds of things tend
to be driven more by the appearance than the physical correctness. The
relative intensities of, say, a candle and a 100W light bulb are
probably more important than the absolute values.<a
href=""><sup>Lighting: The Rendering Equation</sup></a></p>
</blockquote>
<ul>
<li><a
target="_blank" rel="noopener" href="https://stackoverflow.com/questions/34563197/what-units-should-i-use-for-lighting-in-a-3d-rendering-engine">What
units should I use for lighting in a 3D rendering engine?</a></li>
<li><a
target="_blank" rel="noopener" href="https://media.contentapi.ea.com/content/dam/eacom/frostbite/files/course-notes-moving-frostbite-to-pbr-v2.pdf">Moving
Frostbite to Physically Based Rendering 2.0</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.realtimerendering.com/blog/physical-units-for-lights/">Physical
Units for Lights</a></li>
<li><a
target="_blank" rel="noopener" href="https://dev.epicgames.com/documentation/en-us/unreal-engine/physical-lighting-units?application_version=4.27">Physical
Lighting Units</a></li>
<li><a
target="_blank" rel="noopener" href="https://google.github.io/filament/Filament.md.html#lighting/units">Filament
lighting/units</a></li>
<li><a
target="_blank" rel="noopener" href="https://docs.unity3d.com/Packages/com.unity.render-pipelines.high-definition@17.2/manual/Physical-Light-Units.html">Understand
physical light units</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.rorydriscoll.com/2008/08/24/lighting-the-rendering-equation/">Lighting:
The Rendering Equation</a></li>
<li><a
target="_blank" rel="noopener" href="https://blendergrid.com/learn/articles/cycles-physically-correct-brightness">Using
Physically Correct Brightness in Cycles</a>, <a
target="_blank" rel="noopener" href="https://docs.blender.org/manual/en/4.5/render/shader_nodes/shader/emission.html">emission</a></li>
</ul>
</body>
</html>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://darkpixel.top/2025/03/25/Unity%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="黑色像素">
      <meta itemprop="description" content="活着就要继续前进">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Integrator">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/03/25/Unity%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/" class="post-title-link" itemprop="url">Unity基础使用记录</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-03-25 11:22:52" itemprop="dateCreated datePublished" datetime="2025-03-25T11:22:52+00:00">2025-03-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-24 01:54:20" itemprop="dateModified" datetime="2025-06-24T01:54:20+00:00">2025-06-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Computer-Graphics/" itemprop="url" rel="index"><span itemprop="name">Computer Graphics</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Computer-Graphics/Unity/" itemprop="url" rel="index"><span itemprop="name">Unity</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>dummy</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="align-main-camera">Align Main Camera</h1>
<blockquote>
<p>Click “Main Camera” in the Hierarchy and then select GameObject &gt;
Align with View. <a
target="_blank" rel="noopener" href="https://www.idtech.com/blog/using-the-main-camera-gameobject-in-unity-to-get-the-perfect-view"><sup>How
to Set Unity Camera to Scene View or Field of View</sup></a></p>
</blockquote>
<p>如果想要Camera视口范围覆盖当前编辑View，可以通过在视口的gizmo辅助下调整Camera的FOV来实现。</p>
</body>
</html>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://darkpixel.top/2025/03/12/DirectX-legacy-samples/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="黑色像素">
      <meta itemprop="description" content="活着就要继续前进">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Integrator">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/03/12/DirectX-legacy-samples/" class="post-title-link" itemprop="url">DirectX legacy samples</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-03-12 14:00:51" itemprop="dateCreated datePublished" datetime="2025-03-12T14:00:51+00:00">2025-03-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-24 01:54:20" itemprop="dateModified" datetime="2025-06-24T01:54:20+00:00">2025-06-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Computer-Graphics/" itemprop="url" rel="index"><span itemprop="name">Computer Graphics</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Computer-Graphics/DirectX/" itemprop="url" rel="index"><span itemprop="name">DirectX</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>dummy</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="背景">背景</h1>
<p><code>DirectX SDK</code>自从<code>Windows 8 SDK</code>开始，是随着<code>Windows SDK</code>附带的，包含了各个历史版本的头文件、动态库和工具集，但是这些历史版本SDK的sample和辅助库D3DX9、D3DX10、D3DX11等就被丢弃了。</p>
<p>偶尔会遇到一些D3D的旧版本上古demo，可能就使用了一些旧版本的辅助函数，比如在看SSS效果的时候使用iryoku大佬的<a
target="_blank" rel="noopener" href="https://github.com/iryoku/separable-sss">separable-sss</a>，仅仅依赖<code>Windows SDK</code>附带的DX依赖是没法正确跑起来。</p>
<h1 id="替代">替代</h1>
<p>walbourn大佬致力于历史版本的D3DX缺失后而不使用就版本redist安装的替代方案，开源了<a
target="_blank" rel="noopener" href="https://www.nuget.org/packages/Microsoft.DXSDK.D3DX">Microsoft.DXSDK.D3DX</a>，同时给出了历史版本开发替换建议。</p>
<blockquote>
<p>Direct3D 9: There are limited replacements for the functionality in
D3DX9 if you are still using Direct3D 9. You can make use of D3DCompile
APIs directly with the legacy DirectX SDK, but newer versions of the
D3DCompile DLL in the Windows 8.x SDK are not compatible with Windows XP
for runtime use. You can use DirectXMath for Direct3D 9 instead of
D3DXMath or XNAMath via NuGet. You can find Direct3D 9 versions of
DDSTextureLoader, WICTextureLoader, and ScreenGrab on GitHub. You can
use DirectXTex and DirectXMesh when preparing content for use by
Direct3D 9 (the texconv tool supports a -dx9 switch for this purpose).<a
target="_blank" rel="noopener" href="https://walbourn.github.io/living-without-d3dx/"><sup>Living
without D3DX</sup></a></p>
</blockquote>
<blockquote>
<p>Direct3D 10: The best option for Direct3D 10.x applications is to
update them to use Direct3D 11, and then utilize all the options here to
replace legacy D3XD10. Porting the API is very straightforward, and
Direct3D 11 is available on all supported platforms that have Direct3D
10.<a target="_blank" rel="noopener" href="https://walbourn.github.io/living-without-d3dx/"><sup>Living
without D3DX</sup></a></p>
</blockquote>
<blockquote>
<p>Direct3D 12: There is a header that ships in the DirectX 12 samples
on GitHub called d3dx12.h. It is all inline utility header which has no
DLL or redistributable dependency, and can be used under the MIT
license. It is not included in the Windows SDK. If you are looking for
additional functionality, see the DirectX Tool Kit for DirectX 12,
DirectXTex and DirectXMesh.<a
target="_blank" rel="noopener" href="https://walbourn.github.io/living-without-d3dx/"><sup>Living
without D3DX</sup></a></p>
</blockquote>
<h1 id="nuget包管理">nuget包管理</h1>
<p>是开源的包管理软件，<code>Visual Studio</code>自从<code>VS2012</code>开始集成，<code>Microsoft.DXSDK.D3D</code>就可以通过<code>NuGet</code>方便的安装使用。
<!-- ![nuget Microsoft.DXSDK.D3DX](../images/2025-03-12-DirectX-legacy-samples/nuget.png) -->
<img src="/images/DirectX-legacy-samples/nuget.png" class="nuget Microsoft.DXSDK.D3DX"></p>
<h1 id="legacy-directx-samples">Legacy DirectX samples</h1>
<p><a
target="_blank" rel="noopener" href="https://github.com/walbourn/directx-sdk-legacy-samples">directx-sdk-legacy-samples</a>
&gt; This repo contains Direct3D 9, Direct3D 10, a few Direct3D 11, and
DirectSound C++ samples from the legacy DirectX SDK updated to build
using the Windows 10 SDK and the Microsoft.DXSDK.D3DX NuGet package</p>
<p><a
target="_blank" rel="noopener" href="https://github.com/walbourn/directx-sdk-samples">directx-sdk-samples</a>
&gt; This repo contains Direct3D 11, XInput, and XAudio2 samples C++
samples from the legacy DirectX SDK updated to build using the Windows
10 SDK</p>
<p><a
target="_blank" rel="noopener" href="https://github.com/microsoft/DirectX-SDK-Samples">microsoft/DirectX-SDK-Samples</a>
&gt; This repository contains an archive of DirectX samples that shipped
in the legacy DirectX SDK. They have been updated to build with Visual
Studio 2019 or later, require only the current Windows SDK, and make use
the Microsoft.DXSDK.D3DX NuGet package.</p>
<h1 id="参考">参考</h1>
<ul>
<li><a
target="_blank" rel="noopener" href="https://stackoverflow.com/questions/60874509/why-d3dx-is-deprecated">Why
d3dx is deprecated?</a></li>
<li><a target="_blank" rel="noopener" href="https://walbourn.github.io/living-without-d3dx/">Living
without D3DX</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.nuget.org/packages/Microsoft.DXSDK.D3DX">Microsoft.DXSDK.D3DX
9.29.952.8</a></li>
</ul>
</body>
</html>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://darkpixel.top/2025/03/07/Bufferless-rendering-in-OpenGL/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="黑色像素">
      <meta itemprop="description" content="活着就要继续前进">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Integrator">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/03/07/Bufferless-rendering-in-OpenGL/" class="post-title-link" itemprop="url">Bufferless rendering in OpenGL</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-03-07 11:24:05" itemprop="dateCreated datePublished" datetime="2025-03-07T11:24:05+00:00">2025-03-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-24 01:54:20" itemprop="dateModified" datetime="2025-06-24T01:54:20+00:00">2025-06-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Computer-Graphics/" itemprop="url" rel="index"><span itemprop="name">Computer Graphics</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Computer-Graphics/OpenGL/" itemprop="url" rel="index"><span itemprop="name">OpenGL</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>dummy</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="quad-with-bufferless-rendering">Quad with Bufferless
rendering</h1>
<p>如果没记错的话，最初应该是在<code>OpenGL SuperBibile</code>里面看到的无Buffer的渲染方式，把三角形顶点数据写在<code>vertex shader</code>代码里，在shader里通过index取相应的数据，当时感觉平平无奇。后来在SaschaWillems的<a
target="_blank" rel="noopener" href="https://github.com/SaschaWillems/Vulkan">Vulkan
example</a>里看到更精简的写法，当时表示惊呆了，使用<code>gl_VertexIndex</code>来构造顶点数据，画一个覆盖屏幕的quad。下面就是<code>Vulkan example</code>的实现。其中<code>vkCmdDrawIndexed</code>对应<code>gl_VertexIndex</code>,
<code>vkCmdDraw</code>对应<code>gl_VertexID</code>；我是在GL环境下，则是<code>glDrawElements</code>对应<code>gl_VertexIndex</code>,
<code>glDrawArrays</code>对应<code>gl_VertexID</code>。</p>
<figure class="highlight glsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#version 450</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">layout</span> (<span class="keyword">location</span> = <span class="number">0</span>) <span class="keyword">out</span> <span class="type">vec2</span> outUV;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> main() </span><br><span class="line">&#123;</span><br><span class="line">	outUV = <span class="type">vec2</span>((gl_VertexIndex &lt;&lt; <span class="number">1</span>) &amp; <span class="number">2</span>, gl_VertexIndex &amp; <span class="number">2</span>);</span><br><span class="line">	<span class="built_in">gl_Position</span> = <span class="type">vec4</span>(outUV * <span class="number">2.0</span>f - <span class="number">1.0</span>f, <span class="number">0.0</span>f, <span class="number">1.0</span>f);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>就是构造这么一个三角形： <img src="/images/Bufferless-rendering-in-OpenGL/fullscreentriangle.png" class="fullscreentriangle" width="400" height="400" title="fullscreentriangle fullscreentriangle"></p>
<h1 id="with-or-without-vao">with or without VAO?</h1>
<p>具体实现的时候，遇到了这个问题，在GL4.6 core
profile下，没有vao无法将结果渲染到屏幕上，有趣的是，使用renderdoc截帧的时候，却能够截取到渲染的结果。具体的细节不知道，但是总结使用，在<code>core profile</code>下，必须要有vao绑定；在<code>compatibility profile</code>下，不需要vao直接glDraw即可。</p>
<p>搜索了一下，正好法线<a
target="_blank" rel="noopener" href="https://trass3r.github.io/coding/2019/09/11/bufferless-rendering.html">Bufferless
rendering in OpenGL</a>涉及了这个问题，摘抄一下。</p>
<blockquote>
<p>A non-zero Vertex Array Object must be bound (though no arrays have
to be enabled, so it can be a freshly-created vertex array object).<a
target="_blank" rel="noopener" href="https://www.khronos.org/opengl/wiki/Vertex_Rendering#Prerequisites"><sup>Vertex_Rendering</sup></a></p>
</blockquote>
<blockquote>
<p>The compatibility OpenGL profile makes VAO object 0 a default object.
The core OpenGL profile makes VAO object 0 not an object at all. So if
VAO 0 is bound in the core profile, you should not call any function
that modifies VAO state. This includes binding the
GL_ELEMENT_ARRAY_BUFFER with glBindBuffer.<a
target="_blank" rel="noopener" href="https://www.khronos.org/opengl/wiki/Vertex_Specification#Vertex_Array_Object"><sup>Vertex_Specification</sup></a></p>
</blockquote>
<p>所以，使用GL的<code>core profile</code>做<code>bufferless rendering</code>时，使用一个空的(dummy)vao绑定一下，才能让<code>glDraw*</code>命令生效。</p>
<h1 id="参考">参考</h1>
<ul>
<li><a
target="_blank" rel="noopener" href="https://trass3r.github.io/coding/2019/09/11/bufferless-rendering.html">Bufferless
rendering in OpenGL</a></li>
<li><a
target="_blank" rel="noopener" href="https://github.com/SaschaWillems/Vulkan/blob/master/shaders/glsl/deferred/deferred.vert">Quad
rendering vertex shader</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.khronos.org/opengl/wiki/Vertex_Rendering#Prerequisites">Vertex_Rendering</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.khronos.org/opengl/wiki/Vertex_Specification#Vertex_Array_Object">Vertex_Specification
VAO</a></li>
</ul>
</body>
</html>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://darkpixel.top/2025/03/05/Stringifying-OpenGL-enums/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="黑色像素">
      <meta itemprop="description" content="活着就要继续前进">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Integrator">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/03/05/Stringifying-OpenGL-enums/" class="post-title-link" itemprop="url">Stringifying OpenGL enums</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-03-05 15:54:25" itemprop="dateCreated datePublished" datetime="2025-03-05T15:54:25+00:00">2025-03-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-24 01:54:20" itemprop="dateModified" datetime="2025-06-24T01:54:20+00:00">2025-06-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Computer-Graphics/" itemprop="url" rel="index"><span itemprop="name">Computer Graphics</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Computer-Graphics/OpenGL/" itemprop="url" rel="index"><span itemprop="name">OpenGL</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>dummy</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="vulkan枚举值的字符串化">Vulkan枚举值的字符串化</h1>
<p><code>Vulkan</code>中的枚举值做了很好的枚举类型管理，尽管还是是C类型的枚举，具有全局符号可见行；再尽管不似<code>C++ enum class</code>有严格的命名空间访问机制，但是仍然具备相应的枚举类型作为命名空间管理和访问。这为<code>Vulkan</code>枚举值的字符串转换提供了方便，可能这也是为何<a
target="_blank" rel="noopener" href="https://vulkan.lunarg.com/sdk/home"><code>VulkanSDK</code></a>给出了官方实现<code>vk_enum_string_helper.h</code>的原因。</p>
<p>以<code>VkImageType</code>为例， <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Provided by VK_VERSION_1_0</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">enum</span> <span class="title">VkImageType</span> &#123;</span></span><br><span class="line">    VK_IMAGE_TYPE_1D = <span class="number">0</span>,</span><br><span class="line">    VK_IMAGE_TYPE_2D = <span class="number">1</span>,</span><br><span class="line">    VK_IMAGE_TYPE_3D = <span class="number">2</span>,</span><br><span class="line">&#125; VkImageType;</span><br></pre></td></tr></table></figure></p>
<p>其对应的字符串转化实现为，函数签名为<code>string_</code> +
具体的枚举类型， <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">static</span> <span class="keyword">inline</span> <span class="type">const</span> <span class="type">char</span>* <span class="title function_">string_VkImageType</span><span class="params">(VkImageType input_value)</span> &#123;</span><br><span class="line">    <span class="keyword">switch</span> (input_value) &#123;</span><br><span class="line">        <span class="keyword">case</span> VK_IMAGE_TYPE_1D:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;VK_IMAGE_TYPE_1D&quot;</span>;</span><br><span class="line">        <span class="keyword">case</span> VK_IMAGE_TYPE_2D:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;VK_IMAGE_TYPE_2D&quot;</span>;</span><br><span class="line">        <span class="keyword">case</span> VK_IMAGE_TYPE_3D:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;VK_IMAGE_TYPE_3D&quot;</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;Unhandled VkImageType&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="opengl枚举值的字符串化">OpenGL枚举值的字符串化</h1>
<p><code>OpenGL</code>如果想做同样的工作，则面临大不相同的境遇。</p>
<blockquote><!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>dummy</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p>different enum names may have the same hexadecimal values in OpenGL
(especially if you consider the extensions) - a switch will refuse to
compile because of ambiguities</p>
</body>
</html>
<footer><strong>Stringifying OpenGL enums</strong><cite><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/4708202/stringifying-opengl-enums">stackoverflow.com/questions/4708202/stringifying-opengl-enums</a></cite></footer></blockquote>
<p>以<code>Khronos</code>官方给出的<a
target="_blank" rel="noopener" href="https://github.com/KhronosGroup/OpenGL-Registry/blob/main/api/GL/glcorearb.h">GL/glcorearb.h</a>观察，对比<code>Vulkan</code>的枚举值，<code>OpenGL</code>的枚举值有几个问题：
1. 所有枚举值都是<code>#define</code>定义的宏 2.
枚举值没有命名空间（枚举类型） 3.
即使不考虑扩展，都存在不同枚举值对应同一个十六进制常量 4. 类型不是统一的
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">int</span> GLenum;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GL_TIMEOUT_IGNORED 0xFFFFFFFFFFFFFFFF</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GL_INVALID_INDEX 0xFFFFFFFF</span></span><br></pre></td></tr></table></figure></p>
<h1
id="脚本生成gl_enum_string_helper.h">脚本生成<code>gl_enum_string_helper.h</code></h1>
<p>为了简单的生成OpenGL枚举值的字符串化字符串转换函数，做了一些简化： 1.
不考虑扩展枚举值 2.
合并数值相同的枚举值，在<code>switch</code>实现中只保留一个枚举值 3.
对<code>0xFFFFFFFF</code>、<code>0xFFFFFFFFFFFFFFFF</code>这种，单独处理</p>
<p>最终，完成了自动化生成<code>OpenGL</code>枚举值字符串化的头文件。
<figure class="highlight python"><figcaption><span>glenum.py</span><a href="/scripts/codes/glenum.py">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">exts = [<span class="string">&quot;ARB&quot;</span>, <span class="string">&quot;KHR&quot;</span>, <span class="string">&quot;AMD&quot;</span>, <span class="string">&quot;NV&quot;</span>, <span class="string">&quot;OVR&quot;</span>, <span class="string">&quot;APPLE&quot;</span>, <span class="string">&quot;EXT&quot;</span>, <span class="string">&quot;INTEL&quot;</span>, <span class="string">&quot;MESA&quot;</span>,</span><br><span class="line">    <span class="string">&quot;VIEW&quot;</span>,</span><br><span class="line">    <span class="string">&quot;GL_CONTEXT_ROBUST_ACCESS&quot;</span></span><br><span class="line">]</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">IsExts</span>(<span class="params">line</span>):</span><br><span class="line">    <span class="keyword">for</span> ext <span class="keyword">in</span> exts:</span><br><span class="line">        head = <span class="string">&quot;GL_&quot;</span> + ext + <span class="string">&quot;_&quot;</span></span><br><span class="line">        tail = <span class="string">&quot;_&quot;</span> + ext</span><br><span class="line">        tokens = line.split()</span><br><span class="line">        <span class="keyword">if</span> tokens[<span class="number">1</span>].endswith(tail) <span class="keyword">or</span> tokens[<span class="number">1</span>].startswith(head) <span class="keyword">or</span> tokens[<span class="number">1</span>] == ext:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">IsMacro</span>(<span class="params">line</span>):</span><br><span class="line">    tokens = line.split()</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(tokens) != <span class="number">3</span> <span class="keyword">or</span> <span class="keyword">not</span> tokens[<span class="number">2</span>].startswith(<span class="string">&quot;0x&quot;</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">enum2hex = {}</span><br><span class="line">hex2enum = {}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find_key</span>(<span class="params">enum</span>):</span><br><span class="line">    <span class="keyword">for</span> el <span class="keyword">in</span> hex2enum.values():</span><br><span class="line">        <span class="keyword">if</span> enum <span class="keyword">in</span> el:</span><br><span class="line">            <span class="keyword">return</span> el</span><br><span class="line">    <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">header = <span class="string">&quot;&quot;&quot;#pragma once</span></span><br><span class="line"><span class="string">#ifdef __cplusplus</span></span><br><span class="line"><span class="string">#include &lt;string&gt;</span></span><br><span class="line"><span class="string">#endif</span></span><br><span class="line"><span class="string">#include &lt;glad/glad.h&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    f = <span class="built_in">open</span>(<span class="string">&quot;glcorearb.h&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> f.readlines():</span><br><span class="line">        <span class="keyword">if</span> line.startswith(<span class="string">&quot;#define&quot;</span>):</span><br><span class="line">            tokens = line.split()</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> IsMacro(line) <span class="keyword">and</span> <span class="keyword">not</span> IsExts(line):</span><br><span class="line">                <span class="built_in">print</span>(line)</span><br><span class="line"></span><br><span class="line">                e = tokens[<span class="number">1</span>]</span><br><span class="line">                h = <span class="string">&quot;0x&quot;</span> + tokens[<span class="number">2</span>][<span class="number">2</span>:].lstrip(<span class="string">&quot;0&quot;</span>)</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> tokens[<span class="number">2</span>] == <span class="string">&quot;0xFFFFFFFFFFFFFFFFull&quot;</span> <span class="keyword">or</span> tokens[<span class="number">2</span>] == <span class="string">&quot;0xFFFFFFFFu&quot;</span>:</span><br><span class="line">                    h = <span class="string">&quot;0xFFFFFFFF&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                enum2hex[e] = h</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> h <span class="keyword">not</span> <span class="keyword">in</span> hex2enum.keys():</span><br><span class="line">                    hex2enum[h] = [e]</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    hex2enum[h].append(e)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;gl_enum_string_helper.h&quot;</span>, <span class="string">&quot;w&quot;</span>) <span class="keyword">as</span> outfile:</span><br><span class="line">        <span class="built_in">print</span>(header, file=outfile)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;static inline const char* string_gl_enum(GLenum input_value) {&quot;</span>, file=outfile)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;    switch (input_value) {&quot;</span>, file=outfile)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> el <span class="keyword">in</span> hex2enum.values():</span><br><span class="line">            <span class="comment"># print(&#x27;GL_ENUM(%s,%s)&#x27; % (enum, enums[enum]), file=outfile)</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;        case %s:&quot;</span> % el[<span class="number">0</span>], file=outfile)</span><br><span class="line">            </span><br><span class="line">            res = <span class="string">&#x27;|&#x27;</span>.join(el)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;            return \&quot;%s\&quot;;&quot;</span> % res, file=outfile)</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;        default:&quot;</span>, file=outfile)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;            return \&quot;Unhandled Enum\&quot;;&quot;</span>, file=outfile)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;    }&quot;</span>, file=outfile)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;}&quot;</span>, file=outfile)</span><br></pre></td></tr></table></figure></p>
<h1 id="参考">参考</h1>
<ul>
<li><a
target="_blank" rel="noopener" href="https://github.com/KhronosGroup/Vulkan-Utility-Libraries/blob/main/include/vulkan/vk_enum_string_helper.h">vk_enum_string_helper.h</a></li>
<li><a
target="_blank" rel="noopener" href="https://stackoverflow.com/questions/4708202/stringifying-opengl-enums">Stringifying
OpenGL enums</a></li>
<li><a
target="_blank" rel="noopener" href="https://github.com/KhronosGroup/OpenGL-Registry/blob/main/api/GL/glcorearb.h">GL/glcorearb.h</a></li>
<li><a
target="_blank" rel="noopener" href="https://android.googlesource.com/platform/frameworks/native/+/refs/heads/main/opengl/libs/enums.in">opengl
enums</a></li>
<li><a
target="_blank" rel="noopener" href="https://github.com/drbrain/opengl/blob/master/ext/opengl/gl-enums.h">gl-enums</a></li>
</ul>
</body>
</html>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://darkpixel.top/2025/03/04/MeshLab%E8%B0%83%E8%AF%95%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="黑色像素">
      <meta itemprop="description" content="活着就要继续前进">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Integrator">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/03/04/MeshLab%E8%B0%83%E8%AF%95%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">MeshLab调试问题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-03-04 16:53:29" itemprop="dateCreated datePublished" datetime="2025-03-04T16:53:29+00:00">2025-03-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-24 01:54:20" itemprop="dateModified" datetime="2025-06-24T01:54:20+00:00">2025-06-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Computer-Graphics/" itemprop="url" rel="index"><span itemprop="name">Computer Graphics</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Computer-Graphics/%E5%B7%A5%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">工程</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>dummy</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p><strong>MeshLab调试时加载的dll版本不对</strong></p>
<p>从<a target="_blank" rel="noopener" href="https://www.meshlab.net/#download">MeshLab
2023.12</a>下载安装的<code>2023.12</code>版本，我在本地clone了一份源码编译，发现在<code>C:\Users\Administrator\AppData\Roaming\VCG\MeshLab_64bit_fp\MeshLabExtraPlugins\2023.12</code>位置存放了一套插件的dll文件，也就是这一套dll文件影响了源码的调试，也即调试时加载的这个目录下的dll文件，不是生成路径下的dll文件。</p>
<p>根据调用栈加载dll的路径就是这个路径：
<!-- ![MeshLab调试问题/callstack](../images/2025-03-04-MeshLab调试问题/callstack.png) -->
<img src="/images/MeshLab%E8%B0%83%E8%AF%95%E9%97%AE%E9%A2%98/callstack.png" class="MeshLab调试问题&#x2F;callstack"></p>
<p><a
target="_blank" rel="noopener" href="https://github.com/cnr-isti-vclab/meshlab/blob/main/src/common/mlapplication.cpp#L58C1-L75C2">MeshLabApplication::extraPluginsLocation</a>看出，<code>appVer</code>也出了力。但是核心路径还是来自于<code>QStandardPaths::standardLocations(QStandardPaths::AppDataLocation).first()</code>。
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">const</span> QString <span class="title">MeshLabApplication::extraPluginsLocation</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function">QDir <span class="title">appDir</span><span class="params">(QStandardPaths::standardLocations(QStandardPaths::AppDataLocation).first())</span></span>;</span><br><span class="line">	appDir.<span class="built_in">mkpath</span>(appDir.<span class="built_in">absolutePath</span>());</span><br><span class="line">	</span><br><span class="line">	appDir.<span class="built_in">mkdir</span>(<span class="string">&quot;MeshLabExtraPlugins&quot;</span>);</span><br><span class="line">	appDir.<span class="built_in">cd</span>(<span class="string">&quot;MeshLabExtraPlugins&quot;</span>);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//QString major = appVer().left(4);</span></span><br><span class="line">	<span class="comment">//appDir.mkdir(major);</span></span><br><span class="line">	<span class="comment">//appDir.cd(major);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//just for first versions, compatibility of plugins is fixed for same version of meshlab</span></span><br><span class="line">	appDir.<span class="built_in">mkdir</span>(<span class="built_in">appVer</span>());</span><br><span class="line">	appDir.<span class="built_in">cd</span>(<span class="built_in">appVer</span>());</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> appDir.<span class="built_in">absolutePath</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>可以看一下<code>QStandardPaths::standardLocations</code>的内容，可以添加上：
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">   <span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line">   <span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Windows.h&gt;</span></span></span><br><span class="line">   <span class="meta">#<span class="keyword">include</span> <span class="string">&lt;shlobj_core.h&gt;</span></span></span><br><span class="line">QStringList allAppDataLocations =</span><br><span class="line">	QStandardPaths::<span class="built_in">standardLocations</span>(QStandardPaths::AppDataLocation);</span><br><span class="line"><span class="comment">// QString loc = QStandardPaths::writableLocation(QStandardPaths::AppDataLocation);</span></span><br><span class="line">foreach (QString path, allAppDataLocations) &#123;</span><br><span class="line">	<span class="built_in">qInfo</span>() &lt;&lt; path;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">auto</span> s = appDir.<span class="built_in">absolutePath</span>();</span><br><span class="line">LPWSTR  path;</span><br><span class="line"><span class="built_in">SHGetKnownFolderPath</span>(FOLDERID_RoamingAppData, KF_FLAG_DONT_VERIFY, <span class="number">0</span>, &amp;path); </span><br></pre></td></tr></table></figure></p>
<p><strong>QStandardPaths::standardLocations(QStandardPaths::AppDataLocation)是个啥</strong></p>
<p><code>QStandardPaths::standardLocations(QStandardPaths::AppDataLocation)</code>返回的是<code>QStringList</code>类型，本地测试如下，有5个路径，<code>extraPluginsLocation</code>用的就是第一个路径。</p>
<!-- ![2025-03-04-MeshLab调试问题/AppDataLocation](../images/2025-03-04-MeshLab调试问题/AppDataLocation.png) -->
<img src="/images/MeshLab%E8%B0%83%E8%AF%95%E9%97%AE%E9%A2%98/AppDataLocation.png" class="MeshLab调试问题&#x2F;AppDataLocation">
<p><strong>路径来源</strong></p>
<p>deepseek了解了一下，<code>setOrganizationName</code>和<code>setApplicationName</code>会影响到这个路径，细节就没有了，也没有chat到为啥多个路径。<code>setOrganizationName</code>和<code>setApplicationName</code>在<a
target="_blank" rel="noopener" href="https://github.com/cnr-isti-vclab/meshlab/blob/main/src/meshlab/main.cpp#L62">meshlab/main.cpp</a>中都调用到了。
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">QCoreApplication::<span class="built_in">setOrganizationName</span>(MeshLabApplication::<span class="built_in">organization</span>());</span><br><span class="line"></span><br><span class="line">QString tmp = MeshLabApplication::<span class="built_in">appArchitecturalName</span>(MeshLabApplication::<span class="built_in">HW_ARCHITECTURE</span>(QSysInfo::WordSize));</span><br><span class="line">QCoreApplication::<span class="built_in">setApplicationName</span>(MeshLabApplication::<span class="built_in">appArchitecturalName</span>(MeshLabApplication::<span class="built_in">HW_ARCHITECTURE</span>(QSysInfo::WordSize)));</span><br></pre></td></tr></table></figure></p>
<p>具体原因只能看具体实现了，源码面前，了无秘密。来看一看<code>QStandardPaths::standardLocations</code>的定义，在<a
target="_blank" rel="noopener" href="https://github.com/qt/qtbase/blob/dev/src/corelib/io/qstandardpaths_win.cpp#L224">qstandardpaths_win.cpp</a>中。
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">QStringList <span class="title">QStandardPaths::standardLocations</span><span class="params">(StandardLocation type)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QStringList dirs;</span><br><span class="line">    <span class="type">const</span> QString localDir = <span class="built_in">writableLocation</span>(type);</span><br><span class="line">    <span class="keyword">if</span> (!localDir.<span class="built_in">isEmpty</span>())</span><br><span class="line">        dirs.<span class="built_in">append</span>(localDir);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// type-specific handling goes here</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">isConfigLocation</span>(type)) &#123;</span><br><span class="line">        QString programData = <span class="built_in">sHGetKnownFolderPath</span>(FOLDERID_ProgramData);</span><br><span class="line">        <span class="keyword">if</span> (!programData.<span class="built_in">isEmpty</span>()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!<span class="built_in">isGenericConfigLocation</span>(type))</span><br><span class="line">                <span class="built_in">appendOrganizationAndApp</span>(programData);</span><br><span class="line">            dirs.<span class="built_in">append</span>(programData);</span><br><span class="line">        &#125;</span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> QT_BOOTSTRAPPED</span></span><br><span class="line">        <span class="comment">// Note: QCoreApplication::applicationDirPath(), while static, requires</span></span><br><span class="line">        <span class="comment">// an application instance. But we might need to resolve the standard</span></span><br><span class="line">        <span class="comment">// locations earlier than that, so we fall back to qAppFileName().</span></span><br><span class="line">        QString applicationDirPath = qApp ? QCoreApplication::<span class="built_in">applicationDirPath</span>()</span><br><span class="line">            : <span class="built_in">QFileInfo</span>(<span class="built_in">qAppFileName</span>()).<span class="built_in">path</span>();</span><br><span class="line">        dirs.<span class="built_in">append</span>(applicationDirPath);</span><br><span class="line">        <span class="type">const</span> QString dataDir = applicationDirPath + <span class="string">&quot;/data&quot;</span>_L1;</span><br><span class="line">        dirs.<span class="built_in">append</span>(dataDir);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">isGenericConfigLocation</span>(type)) &#123;</span><br><span class="line">            QString appDataDir = dataDir;</span><br><span class="line">            <span class="built_in">appendOrganizationAndApp</span>(appDataDir);</span><br><span class="line">            <span class="keyword">if</span> (appDataDir != dataDir)</span><br><span class="line">                dirs.<span class="built_in">append</span>(appDataDir);</span><br><span class="line">        &#125;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// !QT_BOOTSTRAPPED</span></span></span><br><span class="line">    &#125; <span class="comment">// isConfigLocation()</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dirs;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>可以看到，<code>QStandardPaths::standardLocations</code>正好有5个<code>append</code>操作，正对着<code>QStandardPaths::standardLocations(QStandardPaths::AppDataLocation)</code>返回的5条路径，其中第一条来自于<code>writableLocation</code>设置，并附加了<code>appendOrganizationAndApp</code>名称。递归一下，<code>writableLocation</code>的实现基本如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;shlobj_core.h&gt;</span></span></span><br><span class="line">LPWSTR  path;</span><br><span class="line"><span class="comment">// FOLDERID_Programs,      // ApplicationsLocation</span></span><br><span class="line"><span class="built_in">SHGetKnownFolderPath</span>(FOLDERID_RoamingAppData, KF_FLAG_DONT_VERIFY, <span class="number">0</span>, &amp;path); </span><br></pre></td></tr></table></figure>
<p>path结果，不出所料，正是：
<!-- ![2025-03-04-MeshLab调试问题/writableLocation](../images/2025-03-04-MeshLab调试问题/writableLocation.png) -->
<img src="/images/MeshLab%E8%B0%83%E8%AF%95%E9%97%AE%E9%A2%98/writableLocation.png" class="MeshLab调试问题&#x2F;writableLocation"></p>
<p><strong>调试方法</strong></p>
<p>如果修改的dll恰巧也在<code>C:\Users\Administrator\AppData\Roaming\VCG\MeshLab_64bit_fp\MeshLabExtraPlugins\2023.12</code>目录下，把生成结果copy到该目录下，就可以正常调试了。</p>
</body>
</html>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://darkpixel.top/2025/03/03/%E9%A2%88%E6%A4%8E%E5%BA%B7%E5%A4%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="黑色像素">
      <meta itemprop="description" content="活着就要继续前进">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Integrator">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/03/03/%E9%A2%88%E6%A4%8E%E5%BA%B7%E5%A4%8D/" class="post-title-link" itemprop="url">颈椎康复</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-03-03 09:52:41" itemprop="dateCreated datePublished" datetime="2025-03-03T09:52:41+00:00">2025-03-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-24 01:54:20" itemprop="dateModified" datetime="2025-06-24T01:54:20+00:00">2025-06-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%81%A5%E5%BA%B7%E7%AE%A1%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">健康管理</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>dummy</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>

</body>
</html>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://darkpixel.top/2025/02/19/OpenGL%20Context%E5%88%9B%E5%BB%BA%E6%97%B6%E9%9C%80%E8%A6%81%E8%AE%BE%E7%BD%AE%E7%9A%84%E4%B8%80%E4%BA%9B%E5%AD%97%E6%AE%B5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="黑色像素">
      <meta itemprop="description" content="活着就要继续前进">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Integrator">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/02/19/OpenGL%20Context%E5%88%9B%E5%BB%BA%E6%97%B6%E9%9C%80%E8%A6%81%E8%AE%BE%E7%BD%AE%E7%9A%84%E4%B8%80%E4%BA%9B%E5%AD%97%E6%AE%B5/" class="post-title-link" itemprop="url">OpenGL Context创建时需要设置的一些字段</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-02-19 09:52:31" itemprop="dateCreated datePublished" datetime="2025-02-19T09:52:31+00:00">2025-02-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-24 01:54:20" itemprop="dateModified" datetime="2025-06-24T01:54:20+00:00">2025-06-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Computer-Graphics/" itemprop="url" rel="index"><span itemprop="name">Computer Graphics</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Computer-Graphics/OpenGL/" itemprop="url" rel="index"><span itemprop="name">OpenGL</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>dummy</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p>OpenGL目前的最新版本是2017年发布的4.6版本，OpenGL老矣也不会再有更新了。尽管OpenGL是一套简单易用的图形API，但是很明显它并没有紧跟图形技术发展的脉搏，不仅仅落后于同时代的DirectX，其自身标准的取舍也使其变的碎片化。模式和兼容性就是其中恶心的一点，本文便是记录GLFW3在创建OpenGL上下文时设置模式和兼容性所设置的一些字段。</p>
<p>以前用GLFW3和OpenGL做一些demo时候，<code>glfwWindowHint</code>随意复制粘贴一下然后设置一下OpenGL
Context的版本和Profile即可，并没有过多理会其他的字段的含义和差别。毕竟使用<code>Modern OpenGL</code>或者<code>Core Profile</code>的OpenGL，并不需要在意兼容模式下大量的固定管线API的功能。但是，当实际使用中涉及到了<code>glLineWidth</code>这种从上古时代OpenGL
2.0时期延续至今并在OpenGL
4.6中Deprecated的API，更骚气的是其能不能work还要取决于硬件能力和驱动实现，多重buff于一身，某些字段的设置开始变的微妙起来了。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">glfwWindowHint</span>(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);</span><br><span class="line"><span class="comment">// glfwWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GLFW_TRUE);</span></span><br><span class="line"><span class="built_in">glfwWindowHint</span>(GLFW_CONTEXT_VERSION_MAJOR, <span class="number">4</span>);</span><br><span class="line"><span class="built_in">glfwWindowHint</span>(GLFW_CONTEXT_VERSION_MINOR, <span class="number">6</span>);</span><br><span class="line"><span class="built_in">glfwWindowHint</span>(GLFW_SAMPLES, <span class="number">4</span>);</span><br><span class="line"><span class="built_in">glfwWindowHint</span>(GLFW_SCALE_TO_MONITOR, GLFW_TRUE);</span><br><span class="line"></span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;Vendor  &quot;</span> &lt;&lt; <span class="built_in">glGetString</span>(GL_VENDOR) &lt;&lt; std::endl;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;Render  &quot;</span> &lt;&lt; <span class="built_in">glGetString</span>(GL_RENDERER) &lt;&lt; std::endl;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;GL      &quot;</span> &lt;&lt; <span class="built_in">glGetString</span>(GL_VERSION) &lt;&lt; std::endl;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;GLSL    &quot;</span> &lt;&lt; <span class="built_in">glGetString</span>(GL_SHADING_LANGUAGE_VERSION) &lt;&lt; std::endl;</span><br><span class="line">GLint profile;</span><br><span class="line"><span class="built_in">glGetIntegerv</span>(GL_CONTEXT_PROFILE_MASK, &amp;profile);</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;Profile &quot;</span> &lt;&lt; (profile &amp; GL_CONTEXT_CORE_PROFILE_BIT ? <span class="string">&quot;Core&quot;</span> : <span class="string">&quot;Compatibility&quot;</span>) &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure>
<p>这其中一不小心复制了却不知道意义最终影响了结果的字段非<code>GLFW_OPENGL_FORWARD_COMPAT</code>莫属，而且要和<code>GLFW_OPENGL_PROFILE</code>一同食用为佳。<code>GLFW_OPENGL_FORWARD_COMPAT</code>设置OpenGL的向前兼容性，先来了解一下什么是兼容性，简单来说就是：
- 旧输入，用在新系统，就是向后兼容 -
新输入，用在旧系统，就是向前兼容</p>
<p>OpenGL中compatibility和profile是两个不同的概念，设置了Forward
compatibility的作用是： &gt; For 3.2+ compatibility, it should mean
nothing at all. Since no functionality is marked deprecated in the
compatibility profile, the forward compatibility bit removes nothing.
&gt; For 3.2+ core, it again means that all functionality that is still
deprecated (wide-lines) will be removed.</p>
<p>看看GLFW官方文档的<a
target="_blank" rel="noopener" href="https://www.glfw.org/docs/3.3/window_guide.html">解释</a>，特别注意的是macOS如果创建3.2+版本，只支持前向兼容的核心模式（macOS的OpenGL只支持的4.1，万恶的水果）:
&gt; GLFW_OPENGL_FORWARD_COMPAT specifies whether the OpenGL context
should be forward-compatible, i.e. one where all functionality
deprecated in the requested version of OpenGL is removed. This must only
be used if the requested OpenGL version is 3.0 or above. If OpenGL ES is
requested, this hint is ignored. &gt; <strong>Note</strong> macOS: The
OS only supports forward-compatible core profile contexts for OpenGL
versions 3.2 and later.</p>
<p>这也解释了为啥<code>glLineWidth</code>在前向兼容模式线没作用了，不过是在硬件支持wideline的前提下。</p>
<!-- ![2025-02-19-glfw3-forward-compatibility](../images/2025-02-19-glfw3-forward-compatibility.png)  -->
<img src="/images/2025-02-19-glfw3-forward-compatibility.png" class="2025-02-19-glfw3-forward-compatibility">
<p>图片来自<a
target="_blank" rel="noopener" href="https://medium.com/@wangberlin2000/backward-and-forward-compatibilities-a71e52683627">Backward
and Forward Compatibilities</a></p>
<p>其他窗口系统也有类似的字段设置，比如WGL的<code>WGL_CONTEXT_FORWARD_COMPATIBLE_BIT_ARB</code>和<code>WGL_CONTEXT_CORE_PROFILE_BIT_ARB</code>，大同小异，都是映射到OpenGL上下文的相应配置。
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 4.6 forward compatible core profile</span></span><br><span class="line">	<span class="type">const</span> <span class="type">int</span> attribs[] = &#123;</span><br><span class="line">		WGL_CONTEXT_MAJOR_VERSION_ARB, <span class="number">4</span>,</span><br><span class="line">		WGL_CONTEXT_MINOR_VERSION_ARB, <span class="number">6</span>,</span><br><span class="line">		WGL_CONTEXT_LAYER_PLANE_ARB, <span class="number">0</span>, <span class="comment">// main plane</span></span><br><span class="line">		WGL_CONTEXT_FLAGS_ARB, WGL_CONTEXT_FORWARD_COMPATIBLE_BIT_ARB | WGL_CONTEXT_DEBUG_BIT_ARB,</span><br><span class="line">		WGL_CONTEXT_PROFILE_MASK_ARB, WGL_CONTEXT_CORE_PROFILE_BIT_ARB,</span><br><span class="line">		<span class="number">0</span></span><br><span class="line">	&#125;;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// wglCreateContextAttribsARB https://www.khronos.org/registry/OpenGL/extensions/ARB/WGL_ARB_create_context.txt</span></span><br><span class="line">	HGLRC gl_context = <span class="built_in">wglCreateContextAttribsARB</span>(dc, <span class="literal">NULL</span>, attribs);</span><br></pre></td></tr></table></figure></p>
<p><strong>参考</strong> - <a
target="_blank" rel="noopener" href="https://www.glfw.org/docs/3.3/window_guide.html">GLFW: Window
guide</a> - <a
target="_blank" rel="noopener" href="https://www.khronos.org/opengl/wiki/OpenGL_Context#Context_types">Core
And Compatibility in Contexts</a> - <a
target="_blank" rel="noopener" href="https://gamedev.stackexchange.com/questions/30441/how-to-request-a-specific-opengl-version">How
to request a specific OpenGL version?</a> - <a
target="_blank" rel="noopener" href="https://stackoverflow.com/questions/73745603/detect-the-opengl-context-profile-before-version-3-2">Detect
the OpenGL context profile before version 3.2</a> - <a
target="_blank" rel="noopener" href="https://medium.com/@wangberlin2000/backward-and-forward-compatibilities-a71e52683627">Backward
and Forward Compatibilities</a> - <a
target="_blank" rel="noopener" href="https://gist.github.com/tilkinsc/7f383faccf3722622f5d0cc9bd45e7e6">WGL
Full Demo</a></p>
</body>
</html>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://darkpixel.top/2025/02/18/Hexo-Next%E6%A0%B7%E5%BC%8F%E7%BE%8E%E5%8C%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="黑色像素">
      <meta itemprop="description" content="活着就要继续前进">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Integrator">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/02/18/Hexo-Next%E6%A0%B7%E5%BC%8F%E7%BE%8E%E5%8C%96/" class="post-title-link" itemprop="url">Hexo-Next样式美化</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-02-18 16:02:14" itemprop="dateCreated datePublished" datetime="2025-02-18T16:02:14+00:00">2025-02-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-24 01:54:20" itemprop="dateModified" datetime="2025-06-24T01:54:20+00:00">2025-06-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Hexo-Next/" itemprop="url" rel="index"><span itemprop="name">Hexo-Next</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>dummy</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p>收录经过整合和验证的Hexo-Next配置方案，主要内容来自于网络技术文章，并给出出处，感谢网络大佬们的分享~</p>
<h2 id="修改超链接颜色">修改超链接颜色</h2>
<ul>
<li><a
target="_blank" rel="noopener" href="https://blackchy.com/2019/09/30/2019-09-30-Hexo-Next-Link-Color/">Hexo
Next 修改超链接颜色</a></li>
<li><a target="_blank" rel="noopener" href="https://maoao530.github.io/2017/01/25/hexo-blog-seo/">Hexo
Next博客优化</a>
在./themes/next/source/css/_custom/custom.styl里添加如下代码
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.post-body</span> <span class="selector-tag">a</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.btn</span>)&#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#0593d3</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: none;</span><br><span class="line">  &amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#0477ab</span>;</span><br><span class="line">    <span class="attribute">text-decoration</span>: underline;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> a:not(.btn)避免修改首页的”阅读全文”按钮的样式</li>
</ul>
<h2 id="嵌入pdf文件">嵌入pdf文件</h2>
<ul>
<li><a
target="_blank" rel="noopener" href="https://yuzhang.net/2023/11/07/如何在hexo博客中嵌入PDF/">如何在hexo博客中嵌入PDF</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/next-theme/theme-next-pdf">PDF.js for
NexT</a></li>
</ul>
<ol type="1">
<li>在source目录下新建<code>scripts</code>目录，下载<a
target="_blank" rel="noopener" href="https://mozilla.github.io/pdf.js/getting_started/#download"><code>pdfjs</code></a>放入其中</li>
<li>修改pdfjs中的<code>web/viewer.mjs</code>文件
<!-- ![Hexo-Next样式美化/pdfjs-001](../images/Hexo-Next样式美化/pdfjs-001.png) -->
<img src="/images/Hexo-Next%E6%A0%B7%E5%BC%8F%E7%BE%8E%E5%8C%96/pdfjs-001.png" class="Hexo-Next样式美化&#x2F;pdfjs-001"></li>
<li>修改配置文件<code>_config.yml</code>,
将<code>scripts</code>目录添加到跳过渲染配置 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">skip_render</span>: [scripts<span class="comment">/**]</span></span><br></pre></td></tr></table></figure></li>
<li>将pdf文件放到<code>source</code>目录下，比如<code>source/pdfs</code></li>
<li>添加pdf文件到md文件 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;iframe src=<span class="string">&quot;/scripts/pdfjs-4.10.38/web/viewer.html?file=/pdfs/example.pdf&quot;</span> style=<span class="string">&#x27;width:100%;height:800px&#x27;</span>&gt;&lt;/iframe&gt;</span><br></pre></td></tr></table></figure> &gt; <strong>Note</strong>
pdf文件路径应改为<code>/pdfs/*.pdf</code></li>
</ol>
<p>示例如下，来源<a
target="_blank" rel="noopener" href="https://github.com/kenjihiranabe/The-Art-of-Linear-Algebra/blob/main/The-Art-of-Linear-Algebra.pdf">The-Art-of-Linear-Algebra.pdf</a>：
<iframe src="/scripts/pdfjs-4.10.38/web/viewer.html?file=/pdfs/The-Art-of-Linear-Algebra.pdf" style='width:100%;height:400px'></iframe></p>
<h2 id="hexo-tag-plugin实用技巧">Hexo Tag Plugin实用技巧</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://hexo.io/docs/tag-plugins">Hexo tag plugins</a></li>
</ul>
<ol type="1">
<li><p>引用 <figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% blockquote [author[, source]] [link] [source<span class="emphasis">_link_</span>title] %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure></p></li>
<li><p>文章引用 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% post_link filename [title] [escape] %&#125;</span><br></pre></td></tr></table></figure> <strong>Note</strong>
filename不包含日期和扩展名，比如<code>&#123;% post_link 测试 %&#125;</code></p></li>
<li><p>图片 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% img text url [external] [title] %&#125;</span><br></pre></td></tr></table></figure> <strong>Note</strong>
<code>url</code>应为<code>/images/*.*</code>，比如<code>&#123;% img class /images/2025-02-17-Render-line-001.png 400 400 title alt %&#125;</code></p></li>
<li><p>嵌入代码文件 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% include_code [title] [lang:language] [from:line] [to:line] path/to/file %&#125;</span><br></pre></td></tr></table></figure> <strong>Note</strong>
配置<code>_config.yml</code>下的<code>code_dir</code>字段，<code>path/to/file</code>是<code>code_dir</code>下的路径，比如<code>&#123;% img class /images/2025-02-17-Render-line-001.png 400 400 title alt %&#125;</code></p></li>
</ol>
<h2 id="图片对比">图片对比</h2>
<ul>
<li><a
target="_blank" rel="noopener" href="https://github.com/kristofzerbe/hexo-tag-plugins/tree/main?tab=readme-ov-file#image-compare">tag-image-compare.js</a>,
<a
target="_blank" rel="noopener" href="https://github.com/kristofzerbe/hexo-tag-plugins/blob/main/tag-image-compare.js">Github</a></li>
<li><a
target="_blank" rel="noopener" href="https://image-compare-viewer.netlify.app/">image-compare-viewer</a>,
<a
target="_blank" rel="noopener" href="https://github.com/kylewetton/image-compare-viewer">Github</a></li>
</ul>
<blockquote><!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>dummy</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p>As this tag plugin relies on an external JS library, the files
image-compare-viewer.js and image-compare-viewer.css (or its minified
versions) must be loaded in the header of the web page.</p>
<p>Syntax: <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image_compare </span><br><span class="line">  &quot;imgFileOriginal&quot; </span><br><span class="line">  &quot;imgFileModified&quot; </span><br><span class="line">  &quot;descriptionModified&quot; </span><br><span class="line">  [orientation=vertical] </span><br><span class="line">%&#125;</span><br></pre></td></tr></table></figure></p>
</body>
</html>
</blockquote>
<p>一开始确实不知道怎么配置，给出的说明也没有详尽到怎么操作。主要参考上面给出的两句话<code>must be loaded in the header of the web page</code>和<a
target="_blank" rel="noopener" href="https://github.com/kristofzerbe/kiko.io/blob/gh-pages/post/Hexo-Tag-Plugin-Collection/index.html#L123">作者给出来的示例生成的html</a>，再就是搜索<code>image-compare-viewer</code>在项目中出现的位置，不断试错，推断配置的方法。未必是前端使用的标准方法，不过目前能用。</p>
<ol type="1">
<li><code>tag-image-compare.js</code>放到<code>themes\next\scripts\tags</code>目录，可以看到其他<code>tag plugin</code>也在这个路径下</li>
<li><code>image-compare-viewer.min.js</code> 和
<code>image-compare-viewer.min.css</code>放到<code>themes\next\source\js</code>目录，作者应该是通过打包时候的什么方法拷贝到目标目录，前端不熟没找到方法</li>
<li>在<code>themes\next\layout\_partials\head\head.swig</code>中添加如下代码，把<code>image-compare-viewer</code>引入到网页头部
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;&#123;&#123; url_for(theme.js) &#125;&#125;/image-compare-viewer.min.css&quot;</span>&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123; url_for(theme.js) &#125;&#125;/image-compare-viewer.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
<li>看了一下<code>tag-image-compare.js</code>的代码，居然很简单，修改一下语法
<figure class="highlight javascript"><figcaption><span>tag-image-compare.js</span><a href="/scripts/codes/tag-image-compare.js">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  Image Compare Viewer: https://image-compare-viewer.netlify.app/</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  Syntax:</span></span><br><span class="line"><span class="comment">  {% image_compare &quot;imgFileOriginal&quot; &quot;imgFileModified&quot; &quot;descriptionModified&quot; [orientation=vertical] %}</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">hexo.<span class="property">extend</span>.<span class="property">tag</span>.<span class="title function_">register</span>(<span class="string">&#x27;image_compare&#x27;</span>, <span class="keyword">function</span> (<span class="params">args</span>) {</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> [</span><br><span class="line">    original, </span><br><span class="line">    modified,</span><br><span class="line">    descriptionBefore,</span><br><span class="line">    descriptionAfter,</span><br><span class="line">    orientation</span><br><span class="line">  ] = args;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> assetPath = <span class="variable language_">this</span>.<span class="property">path</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> verticalMode = (orientation === <span class="string">&quot;vertical&quot;</span>).<span class="title function_">toString</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> id = <span class="string">&quot;image-compare-&quot;</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>().<span class="title function_">toString</span>(<span class="number">36</span>).<span class="title function_">substring</span>(<span class="number">2</span>,<span class="number">8</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> elements = <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div id=&quot;<span class="subst">${id}</span>&quot;&gt;</span></span><br><span class="line"><span class="string">      &lt;img class=&quot;image-compare image-original&quot; src=&quot;<span class="subst">${original}</span>&quot; alt=&quot;&quot; /&gt;</span></span><br><span class="line"><span class="string">      &lt;img class=&quot;image-compare image-modified&quot; src=&quot;<span class="subst">${modified}</span>&quot; alt=&quot;&quot; /&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;script&gt;</span></span><br><span class="line"><span class="string">      var themeColor = &quot;#ffffff&quot;;</span></span><br><span class="line"><span class="string">      if (localStorage.getItem(&quot;theme&quot;) === &#x27;dark&#x27;) {</span></span><br><span class="line"><span class="string">        themeColor = &quot;#222222&quot;</span></span><br><span class="line"><span class="string">      }</span></span><br><span class="line"><span class="string">      new ImageCompare(document.getElementById(&quot;<span class="subst">${id}</span>&quot;),</span></span><br><span class="line"><span class="string">      {</span></span><br><span class="line"><span class="string">        controlColor: themeColor,</span></span><br><span class="line"><span class="string">        controlShadow: false,</span></span><br><span class="line"><span class="string">        verticalMode: <span class="subst">${verticalMode}</span>,</span></span><br><span class="line"><span class="string">        showLabels: true,</span></span><br><span class="line"><span class="string">        labelOptions: {</span></span><br><span class="line"><span class="string">          before: &#x27;<span class="subst">${descriptionBefore}</span>&#x27;,</span></span><br><span class="line"><span class="string">          after: &#x27;<span class="subst">${descriptionAfter}</span>&#x27;,</span></span><br><span class="line"><span class="string">          onHover: true,</span></span><br><span class="line"><span class="string">        }</span></span><br><span class="line"><span class="string">      }).mount();</span></span><br><span class="line"><span class="string">    &lt;/script&gt;</span></span><br><span class="line"><span class="string">  `</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> elements;</span><br><span class="line">});</span><br></pre></td></tr></table></figure></li>
</ol>
<p>修改之后的语法： <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% image_compare </span><br><span class="line">  <span class="string">&quot;imgFileOriginal&quot;</span> </span><br><span class="line">  <span class="string">&quot;imgFileModified&quot;</span> </span><br><span class="line">  <span class="string">&quot;descriptionBefore&quot;</span>,</span><br><span class="line">  <span class="string">&quot;descriptionAfter&quot;</span>,</span><br><span class="line">  [orientation=vertical] </span><br><span class="line">%&#125;</span><br></pre></td></tr></table></figure></p>
<p>示例一个： 
    <div id="image-compare-2yp2z5">
      <img class="image-compare image-original" src="/images/2025-02-17-Render-line-002.png" alt="" />
      <img class="image-compare image-modified" src="/images/2025-02-28-Reversed-Z-Depth-Buffer-001.png" alt="" />
    </div>
    <script>
      var themeColor = "#ffffff";
      if (localStorage.getItem("theme") === 'dark') {
        themeColor = "#222222"
      }
      new ImageCompare(document.getElementById("image-compare-2yp2z5"),
      {
        controlColor: themeColor,
        controlShadow: false,
        verticalMode: false,
        showLabels: true,
        labelOptions: {
          before: 'TAA on',
          after: 'TAA off',
          onHover: true,
        }
      }).mount();
    </script>
  </p>
<h2 id="嵌入图表">嵌入图表</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/fluid-dev/hexo-theme-fluid">Fluid
Theme</a></li>
<li><a target="_blank" rel="noopener" href="https://hexo.fluid-dev.com/posts/hexo-echarts/">使用
ECharts 插件绘制炫酷图表</a></li>
</ul>
</body>
</html>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://darkpixel.top/2025/02/17/Render-line/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="黑色像素">
      <meta itemprop="description" content="活着就要继续前进">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Integrator">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2025/02/17/Render-line/" class="post-title-link" itemprop="url">Render line</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-02-17 13:44:08" itemprop="dateCreated datePublished" datetime="2025-02-17T13:44:08+00:00">2025-02-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-24 01:54:20" itemprop="dateModified" datetime="2025-06-24T01:54:20+00:00">2025-06-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Computer-Graphics/" itemprop="url" rel="index"><span itemprop="name">Computer Graphics</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Computer-Graphics/OpenGL/" itemprop="url" rel="index"><span itemprop="name">OpenGL</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>dummy</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="渲染api对于线渲染的支持">渲染API对于线渲染的支持</h1>
<table>
<colgroup>
<col style="width: 22%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>wireframe</th>
<th>line mode</th>
<th>line width</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>OpenGL</td>
<td>glPolygonMode(GL_FRONT_AND_BACK, GL_LINE)</td>
<td>glDrawArrays: GL_LINES/GL_LINE_STRIP/GL_LINE_LOOP</td>
<td>glLineWidth</td>
</tr>
<tr class="even">
<td>Vulkan</td>
<td>VkPipelineRasterizationStateCreateInfo/VK_POLYGON_MODE_LINE</td>
<td>VkPipelineInputAssemblyStateCreateInfo:
VK_PRIMITIVE_TOPOLOGY_LINE_LIST/VK_PRIMITIVE_TOPOLOGY_LINE_STRIP</td>
<td><a
target="_blank" rel="noopener" href="https://registry.khronos.org/vulkan/specs/latest/man/html/vkCmdSetLineWidth.html">vkCmdSetLineWidth</a>,
VkPipelineRasterizationStateCreateInfo::lineWidth</td>
</tr>
<tr class="odd">
<td>DirectX 11</td>
<td>D3D11_RASTERIZER_DESC/D3D11_FILL_WIREFRAME</td>
<td>IASetPrimitiveTopology(D3D11_PRIMITIVE_TOPOLOGY_LINELIST)</td>
<td></td>
</tr>
<tr class="even">
<td>DirectX 12</td>
<td>D3D12_GRAPHICS_PIPELINE_STATE_DESC/D3D12_FILL_WIREFRAME</td>
<td>D3D12_GRAPHICS_PIPELINE_STATE_DESC/D3D12_PRIMITIVE_TOPOLOGY_TYPE_LINE,
IASetPrimitiveTopology(D3D12_PRIMITIVE_TOPOLOGY_LINELIST)</td>
<td></td>
</tr>
</tbody>
</table>
<p>glLineWidth的<a
target="_blank" rel="noopener" href="https://registry.khronos.org/OpenGL-Refpages/gl4/html/glLineWidth.xhtml">文档</a>中说只保证宽度1的设置，其他宽度依赖硬件实现。
&gt; Only width 1 is guaranteed to be supported; others depend on the
implementation.</p>
<p><a
target="_blank" rel="noopener" href="https://registry.khronos.org/OpenGL/specs/gl/glspec46.core.pdf">glspec46.core#678
E.2.1 Deprecated But Still Supported
Features</a>把glLineWidth设为Deprecated。<code>They may be removed from a future version of OpenGL, and are removed in a forward compatible context implementing the core profile</code>
&gt; Widelines- LineWidthvalues greater than 1.0 will generate an
INVALID_VALUE error.</p>
<p>Vulkan设置线宽度，如果VkPipelineDynamicStateCreateInfo::pDynamicStates设置了VK_DYNAMIC_STATE_LINE_WIDTH，则使用<a
target="_blank" rel="noopener" href="https://registry.khronos.org/vulkan/specs/latest/man/html/vkCmdSetLineWidth.html">vkCmdSetLineWidth</a>设置后续的线渲染宽度；否则通过VkPipelineRasterizationStateCreateInfo::lineWidth创建pipeline时设置。如果设置非1.0的宽度，依赖硬件的支持，需要查询硬件是否支持VkphysicalDeviceFeatures::wideLines特性，可以通过<a
target="_blank" rel="noopener" href="https://vulkan.gpuinfo.org/listdevices.php">GPUinfo</a>查询。 &gt;
If the wideLines feature is not enabled, lineWidth must be 1.0</p>
<p>DX11/12都没有明确的API和数据结构支持wide line的渲染。只发现<a
target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/windows/win32/direct3d9/line-drawing-support-in-d3dx">Line
Drawing Support in D3DX (Direct3D
9)</a>中描述了基于上古D3D9封装的ID3DXLine通过textured
polygons来模拟线宽模式设置。</p>
<p>基于我在本地平台测试，在Nvidia GeForce RTX 4080
Super显卡上，<del>glLineWidth无效</del>，后来发现其实在我的平台上glLineWidth是有效的，主要是因为设置了<code>glfwWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GLFW_TRUE)</code>，GLFW_OPENGL_FORWARD_COMPAT导致OpenGL上下文是向前兼容模式，效果就是移除Deprecated的API，glLineWidth就是其中一个(4.6
Deprecated);
Vulkan通过VkPipelineRasterizationStateCreateInfo::lineWidth设置宽度有效，且有相应的上限值。在网络上线宽设置无效的技术贴早已有之，比如<a
target="_blank" rel="noopener" href="https://forums.developer.nvidia.com/t/gllinewidth-and-gllinestipple-sustainability/71654">glLineWidth
and glLineStipple sustainability</a>, <a
target="_blank" rel="noopener" href="https://community.khronos.org/t/gllinewidth-doesnt-work/14052">glLineWidth
- doesn’t work !</a>, <a
target="_blank" rel="noopener" href="https://stackoverflow.com/questions/44665007/line-width-not-working-in-vulkan">Line_width
not working in Vulkan</a>都有涉及。 &gt; On my hardware, lines are
always 1 pixel large, whatever the parameters are, for many years now.
Create polygons for larger lines is the solution that will always
work.</p>
<p>可见，虽然各家API各异，但是在线渲染宽度上基本一致，完全取决于驱动的实现和硬件的能力。在一般情况下，即便API给出了设置的接口，却并不能十足相信其能够work，最稳妥的方法，还是通过对线段顶点进行四边形扩展来实现宽线段的渲染。</p>
<h1 id="如何渲染线">如何渲染线</h1>
<p>关于线的渲染，如果显卡具备相应的功能，并且API也支持，那当然万事大吉、探囊取物了；但是，问题就出在这个但是，如果不凑巧，您当前的显卡和开发环境不允许，或者您的代码需要跨平台，可能就需要更稳妥的方案了。其实也没有多少方案，唯<code>四边形扩展</code>一种尔，既稳妥又好用。真是越朴实简易的东西，越能穿越时间，历久弥坚，真正是重剑无锋大巧不工，大道至简。</p>
<p><strong>线的宽度</strong></p>
<p>关于线的宽度，要以什么单位去计量？很直观的结论就是，在屏幕空间，以像素计。我觉得有两点理由：1）线理论上是没有宽度的，如果在模型空间给线一个宽度，经过透视投影之后，有近大远小，这就很奇怪；2）线的光栅化，首先把两个点变换到屏幕空间，然后再对两个点之间线条进行光栅化，这个光栅化的结果很自然就是一个像素宽度的片元序列（如果线平行于坐标轴），所以某些API和硬件默认只能光栅化1个像素宽度的线也就不足为奇了。</p>
<p><strong>线宽算法</strong></p>
<p>知道了线宽的单位是屏幕空间像素计量之后，使用<code>quad polygon</code>把线扩展成两个三角形的方法就比较明显了，以任何方法在屏幕空间把线段的两个顶点扩展成4个顶点，这个过程可以在CPU里计算，也可以在GPU的<code>VS</code>、<code>GS</code>等顶点处理阶段计算。如果在顶点处理阶段完成，输出的坐标是<code>clip space</code>裁剪空间坐标，而我们扩展四边形的操作是在屏幕空间完成的，就涉及到坐标变换的具体实现了。</p>
<p><code>quad</code>的生成<a
target="_blank" rel="noopener" href="https://github.com/mhalber/Lines?tab=readme-ov-file#methods">算法</a>如下：
&gt; 1. Transform line segment end points p and q to normalized device
space. At this point we work in 2D space, regardless of whether original
line was specified as 2D or 3D line. 2. Calculate direction d, corrected
for viewport aspect ratio. 3. Calculate unit normal vector n = {-d.y,
d.x} 4. Modulate n by approperiate line widths to get vectors n_a and
n_b 5. Create quad points a = p + n_a, b = p - n_a, c = q + n_b, d = q -
n_b 6. Move points a, b, c, d back to clip space and pass them down the
rasterization pipeline</p>
<p><strong>具体实现</strong></p>
<p>根据<a
target="_blank" rel="noopener" href="https://stackoverflow.com/questions/3484260/opengl-line-width">OpenGL
Line Width</a>中<a
target="_blank" rel="noopener" href="https://stackoverflow.com/users/5577765/rabbid76">rabbid76</a>的回答，整理了一套可以运行的代码示例，我是直接拖进<code>LearnOpenGL</code>运行的。运行结果如下：
<!-- ![line_width](../images/2025-02-17-Render-line/line_width.png) -->
<img src="/images/Render-line/line_width.png" class="line_width"></p>
<figure class="highlight cpp"><figcaption><span>line_width.cpp</span><a href="/scripts/codes/line_width.cpp">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="type">int</span> line_i = gl_VertexID / <span class="number">6</span>;</span><br><span class="line">    <span class="type">int</span> tri_i  = gl_VertexID % <span class="number">6</span>;</span><br><span class="line"></span><br><span class="line">    vec4 va[<span class="number">4</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">4</span>; ++i)</span><br><span class="line">    {</span><br><span class="line">        va[i] = u_mvp * vertex[line_i+i];</span><br><span class="line">        va[i].xyz /= va[i].w;</span><br><span class="line">        va[i].xy = (va[i].xy + <span class="number">1.0</span>) * <span class="number">0.5</span> * u_resolution;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    vec2 v_line  = <span class="built_in">normalize</span>(va[<span class="number">2</span>].xy - va[<span class="number">1</span>].xy);</span><br><span class="line">    vec2 nv_line = <span class="built_in">vec2</span>(-v_line.y, v_line.x);</span><br><span class="line"></span><br><span class="line">    vec4 pos;</span><br><span class="line">    <span class="keyword">if</span> (tri_i == <span class="number">0</span> || tri_i == <span class="number">1</span> || tri_i == <span class="number">3</span>)</span><br><span class="line">    {</span><br><span class="line">        vec2 v_pred  = <span class="built_in">normalize</span>(va[<span class="number">1</span>].xy - va[<span class="number">0</span>].xy);</span><br><span class="line">        vec2 v_miter = <span class="built_in">normalize</span>(nv_line + <span class="built_in">vec2</span>(-v_pred.y, v_pred.x));</span><br><span class="line"></span><br><span class="line">        pos = va[<span class="number">1</span>];</span><br><span class="line">        pos.xy += v_miter * u_thickness * (tri_i == <span class="number">1</span> ? <span class="number">-0.5</span> : <span class="number">0.5</span>) / <span class="built_in">dot</span>(v_miter, nv_line);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    {</span><br><span class="line">        vec2 v_succ  = <span class="built_in">normalize</span>(va[<span class="number">3</span>].xy - va[<span class="number">2</span>].xy);</span><br><span class="line">        vec2 v_miter = <span class="built_in">normalize</span>(nv_line + <span class="built_in">vec2</span>(-v_succ.y, v_succ.x));</span><br><span class="line"></span><br><span class="line">        pos = va[<span class="number">2</span>];</span><br><span class="line">        pos.xy += v_miter * u_thickness * (tri_i == <span class="number">5</span> ? <span class="number">0.5</span> : <span class="number">-0.5</span>) / <span class="built_in">dot</span>(v_miter, nv_line);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    pos.xy = pos.xy / u_resolution * <span class="number">2.0</span> - <span class="number">1.0</span>;</span><br><span class="line">    pos.xyz *= pos.w;</span><br><span class="line">    gl_Position = pos;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>点评一下： -
考虑了line_strip连接处的法线，利用连接处前后两个线段法线的平分线作为法线法向，并通过<code>cos</code>计算应该沿法线延申的长度；给顶点buffer多添加首点和末点，减少判断
-
接近平行的两端线段，<code>cos</code>值接近于0，除法操作导致顶点沿着法线延伸的长度过大，需要处理一下，比如<code>max(dot(v_miter, nv_line), 0.8)</code>，可以缓解不能消除
<!-- ![line_width_defect](../images/2025-02-17-Render-line/defect.png) -->
<img src="/images/Render-line/defect.png" class="line_width_defect"></p>
<h1 id="抗锯齿">抗锯齿</h1>
<h2 id="硬件抗锯齿">硬件抗锯齿</h2>
<h1 id="参考">参考</h1>
<ul>
<li><a
target="_blank" rel="noopener" href="https://registry.khronos.org/OpenGL-Refpages/gl4/html/glDrawArrays.xhtml">glDrawArrays</a></li>
<li><a
target="_blank" rel="noopener" href="https://stackoverflow.com/questions/44665007/line-width-not-working-in-vulkan">Line_width
not working in Vulkan</a></li>
<li><a
target="_blank" rel="noopener" href="https://stackoverflow.com/questions/3484260/opengl-line-width">OpenGL
Line Width</a></li>
<li><a
target="_blank" rel="noopener" href="https://stackoverflow.com/questions/60440682/drawing-a-line-in-modern-opengl">Drawing
a line in modern OpenGL</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/mhalber/Lines">lines</a></li>
</ul>
</body>
</html>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">黑色像素</p>
  <div class="site-description" itemprop="description">活着就要继续前进</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">24</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">黑色像素</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

  

</body>
</html>
